var player={cover:document.querySelector(".jd-cover"),track_now:document.querySelector("#track-now"),status:document.querySelector(".jd-on-off"),btn_next:document.querySelector(".jd-next"),btn_prev:document.querySelector(".jd-prev"),btn_play:document.querySelector(".jd-play-pause"),btn_reload:document.querySelector(".jd-reload"),icon_play:document.querySelector("#play"),btn_mute:document.querySelector(".jd-mute"),icon_vol:document.querySelector("#icon-vol"),vol_slider:document.querySelector(".jd-slider-vol"),bar_volume:document.querySelector(".jd-progress-vol"),txt_vol:document.querySelector(".jd-txt-vol"),seek_bar:document.querySelector(".jd-progress-seek"),timing:document.querySelector(".jd-timing"),current_timinig:document.querySelector(".jd-current-timing"),seek:document.querySelector("#seek"),container:document.querySelector(".jd-list"),last_cover:document.querySelector("#last-cover"),next_cover:document.querySelector("#next-cover"),last_title:document.querySelector("#last-song-title"),next_title:document.querySelector("#next-song-title"),item:"",box:"",y:0,audio_list:audios,current_list:{},current_song:0,isPlaying:!1,audio:new Audio,init(){this.action(),this.setMusic(0)},action(){for(this.btn_play.onclick=()=>this.onPlayPause(),this.btn_next.onclick=()=>this.nextSong(),this.btn_prev.onclick=()=>this.prevSong(),this.btn_reload.onclick=()=>this.reloadSong(),this.vol_slider.oninput=()=>this.setVolume(),this.btn_mute.onclick=()=>this.setMute(),this.setSeekBar(),this.seek.addEventListener("change",()=>{this.audio.currentTime=this.seek.value});this.y<audios.length;)position=`${("0"+(this.y+1)).slice(-2)}`,this.box='<li class="jd-list-group">                             <span class="jd-order">'+position+'.</span>                             <span class="jd-track-list">'+audios[this.y].song+" - "+audios[this.y].artist+'</span>                             <span class="jd-total-current">'+audios[this.y].time+"</span>                         </li>",this.container.innerHTML+=this.box,this.y++;this.item=document.querySelectorAll(".jd-list-group"),this.item.forEach((key,value)=>{key.addEventListener("click",()=>{this.setMusic(value),this.play()})})},play(){this.isPlaying=!0,this.audio.play(),this.icon_play.classList.remove("fa-play"),this.icon_play.classList.add("fa-pause"),this.status.innerText="Playing..."},pause(){this.isPlaying=!1,this.audio.pause(),this.icon_play.classList.remove("fa-pause"),this.icon_play.classList.add("fa-play"),this.status.innerText="Paused..."},onPlayPause(){this.isPlaying?this.pause():this.play()},setMusic(i){this.seek.value=0,this.song_list=audios[i],this.current_song=i,this.audio.src=this.song_list.path,this.track_now.innerText=`${this.song_list.song}  -  ${this.song_list.artist}`,this.cover.style.backgroundImage=`url('${this.song_list.cover}')`,this.audio.onloadeddata=()=>{setTimeout(()=>{this.seek.max=this.audio.duration,this.timing.innerText=getTime(this.audio.duration)},300)},this.item.forEach(key=>key.classList.remove("active")),this.item[this.current_song].classList.add("active");let old_song=this.current_song-1,next_song=this.current_song+1;old_song<0&&(old_song=audios.length-1),next_song==audios.length&&(next_song=0),this.last_cover.style.backgroundImage=`url('${audios[old_song].cover}')`,this.next_cover.style.backgroundImage=`url('${audios[next_song].cover}')`,this.last_title.innerText=audios[old_song].song,this.next_title.innerText=audios[next_song].song},setSeekBar(){setInterval(()=>{this.seek.value=this.audio.currentTime,this.current_timinig.innerText=getTime(this.audio.currentTime),Math.floor(this.audio.currentTime)==Math.floor(this.seek.max)&&(this.btn_reload.className.includes("active")?(this.setMusic(this.current_song),this.play()):this.nextSong())},500)},next(){this.current_song>audios.length-1&&(this.current_song=0,this.setMusic(this.current_song),this.play())},nextSong(){this.current_song>=audios.length-1?this.current_song=0:this.current_song++,this.setMusic(this.current_song),this.play()},prevSong(){this.current_song<=0?this.current_song=audios.length-1:this.current_song--,this.setMusic(this.current_song),this.play()},reloadSong(){this.btn_reload.classList.toggle("active")},setVolume(){this.audio.volume=this.vol_slider.value,this.val=100*this.audio.volume,this.val_p=Math.round(this.val),this.txt_vol.innerText=this.val_p+"%",0==this.vol_slider.value?(this.icon_vol.classList.remove("fa-volume-up"),this.icon_vol.classList.add("fa-volume-down")):(this.icon_vol.classList.remove("fa-volume-down"),this.icon_vol.classList.add("fa-volume-up"))},setMute(){this.audio.muted=!this.audio.muted,this.audio.muted?(this.icon_vol.classList.remove("fa-volume-up"),this.icon_vol.classList.add("fa-volume-mute")):(this.icon_vol.classList.remove("fa-volume-mute"),this.icon_vol.classList.add("fa-volume-up"))}};function getTime(time){const minutes=Math.floor(time/60),seconds=Math.floor(time%60);return`${("0"+minutes).slice(-2)}:${("0"+seconds).slice(-2)}`}window.addEventListener("load",()=>{player.init()});
